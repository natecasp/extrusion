import*as THREE from"three";import{OrbitControls}from"three/addons/controls/OrbitControls.js";import{STLExporter}from"three/addons/exporters/STLExporter.js";import{GUI}from"three/addons/libs/lil-gui.module.min.js";var sandbox=document.getElementById("sandbox");let exporter,scene=new THREE.Scene,camera=new THREE.PerspectiveCamera(60,sandbox.offsetWidth/sandbox.offsetHeight,.1,1e4);camera.position.set(-3,5,20).setLength(.75);let orthoCamera=new THREE.OrthographicCamera(sandbox.offsetWidth/-2,sandbox.offsetWidth/2,sandbox.offsetHeight/2,sandbox.offsetHeight/-2,1,1e3);orthoCamera.position.set(-3,5,20).setLength(.75),orthoCamera.lookAt(new THREE.Vector3(0,0,0)),scene.add(orthoCamera);let renderer=new THREE.WebGLRenderer({antialias:!0,preserveDrawingBuffer:!0});exporter=new STLExporter,renderer.shadowMap.enabled=!0,renderer.setSize(sandbox.offsetWidth,sandbox.offsetHeight),renderer.setClearColor(16777215,0),sandbox.appendChild(renderer.domElement),window.addEventListener("resize",()=>{camera.aspect=sandbox.offsetWidth/sandbox.offsetHeight,camera.updateProjectionMatrix(),renderer.setSize(sandbox.offsetWidth,sandbox.offsetHeight)});let controls=new OrbitControls(camera,renderer.domElement);controls.enableDamping=!0,controls.minDistance=.5,controls.maxDistance=4;let light=new THREE.DirectionalLight(16777215,2),light2=new THREE.DirectionalLight(16777215,1);const amb=new THREE.AmbientLight(4210752);light2.position.setScalar(-1),light.position.setScalar(1),light.castShadow=!0,scene.add(light2),scene.add(light,new THREE.AmbientLight(16777215,2));const gui=new GUI,params={OD:.12,ID:.1,Length:.2,takeScreenshot:takeScreenshot,exportBinary:exportBinary,modelColor:"#ffffff",opacity:.85,rotation:!0,sphereColor:"#333"},folder=gui.addFolder("Export"),odController=folder.add(params,"OD",.03,.5,.001).onChange(createShape),idController=folder.add(params,"ID",.02,.45,.001).onChange(createShape),lengthController=folder.add(params,"Length",0,100,.2).onChange(createShape),materialController=folder.add(params,"modelColor",["#ffffff","#000000","#97999B","#00AB8E","#006A52","#004B87","#002855","#9678D3"]).onChange(createShape),opacityController=folder.add(params,"opacity",.1,1,.6).onChange(createShape),sphereController=folder.add(params,"sphereColor",["#333","#e0e0e0"]).onChange(createSphere);sphereController.hide(),opacityController.hide(),materialController.hide(),lengthController.hide(),idController.hide(),odController.hide();const imageController=folder.add(params,"takeScreenshot").name("Save as Image"),stlController=folder.add(params,"exportBinary").name("Save as STL"),rotationController=folder.add(params,"rotation").name("Rotate").onChange(createShape);folder.open();function createSphere(){const e=new THREE.SphereGeometry(40,32,16),l=new THREE.MeshStandardMaterial({color:params.sphereColor,roughness:.8}),a=new THREE.Mesh(e,l);a.material.side=THREE.BackSide,a.receiveShadow=!0;const o=new THREE.Object3D;o.name="bg",o.add(a),scene.add(o)}createSphere();let rotate=.005;function createShape(){if("in"==$("#unit").val())var e=.002;else var e=.05;if(0>+params.OD-+params.ID)var l=+params.ID+ +e;else var l=+params.OD;if(0<params.ID-params.OD)var a=+params.OD-+e;else var a=+params.ID;if("#ffffff"==params.modelColor)var t="#ffffff";if("White"==params.modelColor)var t="#ffffff";if("Black"==params.modelColor)var t="#000000";if("Cool Grey (7C)"==params.modelColor)var t="#97999B";if("Green (3268C)"==params.modelColor)var t="#00AB8E";if("Green (3298C)"==params.modelColor)var t="#006A52";if("Blue (301C)"==params.modelColor)var t="#004B87";if("Blue (295C)"==params.modelColor)var t="#002855";if("Purple (2655C)"==params.modelColor)var t="#9678D3";if("Cool Grey (4C)"==params.modelColor)var t="#BBBCBC";if("Green (3248C)"==params.modelColor)var t="#6DCDB8";if("Blue (2925C)"==params.modelColor)var t="#009CDE";if("Blue (290C)"==params.modelColor)var t="#B9D9EB";rotate=!0==params.rotation?.005:0;let i=new THREE.Shape;i.absarc(0,0,l/2,0,2*Math.PI),i.holes.push(new THREE.Path().absarc(0,0,a/2,0,2*Math.PI,!1));let d=new THREE.ExtrudeGeometry(i,{steps:1,bevelEnabled:!1,bevelSegments:5,bevelSize:.001,bevelThickness:.001,depth:params.Length,curveSegments:100}),n=new THREE.MeshStandardMaterial({color:t,roughness:.4});var r=scene.getObjectByName("obj");""!=r&&scene.remove(r);let s=new THREE.Mesh(d,n);s.geometry.center(),s.material.shading=THREE.SmoothShading,s.material.side=THREE.DoubleSide,s.material.transparent=!0,s.material.opacity=params.opacity;const o=new THREE.Object3D;o.name="obj",o.add(s),scene.add(o)}createShape(.05);let clock=new THREE.Clock;$(".cost").prop("readonly",!0);var day=dayjs().day();6==day?($("#4-week-date").text(dayjs().add(30,"day").format("MMMM DD")),$("#3-week-date").text(dayjs().add(23,"day").format("MMMM DD")),$("#2-week-date").text(dayjs().add(16,"day").format("MMMM DD")),$("#1-week-date").text(dayjs().add(9,"day").format("MMMM DD")),$("#2-day-date").text(dayjs().add(5,"day").format("MMMM DD"))):7==day?($("#4-week-date").text(dayjs().add(29,"day").format("MMMM DD")),$("#3-week-date").text(dayjs().add(22,"day").format("MMMM DD")),$("#2-week-date").text(dayjs().add(15,"day").format("MMMM DD")),$("#1-week-date").text(dayjs().add(8,"day").format("MMMM DD")),$("#2-day-date").text(dayjs().add(4,"day").format("MMMM DD"))):($("#4-week-date").text(dayjs().add(28,"day").format("MMMM DD")),$("#3-week-date").text(dayjs().add(21,"day").format("MMMM DD")),$("#2-week-date").text(dayjs().add(14,"day").format("MMMM DD")),$("#1-week-date").text(dayjs().add(7,"day").format("MMMM DD")),$("#2-day-date").text(dayjs().add(3,"day").format("MMMM DD")));var user="";setTimeout(function(){user=JSON.parse(localStorage.getItem("pocketbase_auth")),console.log(user)},1500),console.log(user),$("#4-week-price").on("change",function(){var e=1-+user.model.discount,l=this.value;$("#4-week-price").val((+l*e).toFixed(2)),$("#4-week-discount").text("$"+(+l).toFixed(2)),$("#3-week-price").val(((+l+300)*e).toFixed(2)),$("#3-week-discount").text("$"+(+l+300).toFixed(2)),$("#2-week-price").val(((+l+600)*e).toFixed(2)),$("#2-week-discount").text("$"+(+l+600).toFixed(2)),$("#1-week-price").val(((+l+1100)*e).toFixed(2)),$("#1-week-discount").text("$"+(+l+1100).toFixed(2)),$("#2-day-price").val(((+l+2100)*e).toFixed(2)),$("#2-day-discount").text("$"+(+l+2100).toFixed(2))}),$(document).ready(function(){var e=$.browser.name+" v"+$.browser.versionNumber+" on "+$.browser.platform;window.parent.postMessage({system:e},"https://orders.midwestint.com/instant-quote/designer.html"),$("#qty-dialog").dialog({autoOpen:!1,position:{my:"left+10 top",at:"right top",of:"#qty-popup",collision:"none"}}),$("#shipping-dialog").dialog({autoOpen:!1,position:{my:"left+10 top",at:"right top",of:"#shipping-method",collision:"none"}}),$("#account-dialog").dialog({autoOpen:!1,position:{my:"left+10 top",at:"right top",of:"#shipping-account",collision:"none"}}),$("#2day-dialog").dialog({autoOpen:!1,position:{my:"left+10 top",at:"right top",of:"#2-day-date",collision:"none"}}),$("#verification").dialog({autoOpen:!1,position:{my:"left+10 top",at:"right top",of:"#po-verification",collision:"none"}}),$("#empty-po").dialog({autoOpen:!1,position:{my:"left+10 top",at:"right top",of:"#po-number",collision:"none"}}),$("#cert-0").dialog({autoOpen:!1,position:{my:"left+10 top",at:"right top",of:"#cert-0-dialog",collision:"none"}}),$("#cert-1").dialog({autoOpen:!1,position:{my:"left+10 top",at:"right top",of:"#cert-1-dialog",collision:"none"}}),$("#cert-2").dialog({autoOpen:!1,position:{my:"left+10 top",at:"right top",of:"#cert-2-dialog",collision:"none"}}),$("#cert-3").dialog({autoOpen:!1,position:{my:"left+10 top",at:"right top",of:"#cert-3-dialog",collision:"none"}}),$("#wall-dialog").dialog({autoOpen:!1,position:{my:"left+10 top",at:"right top",of:"#wall",collision:"none"}}),$("#length-dialog").dialog({autoOpen:!1,position:{my:"left+10 top",at:"right top",of:"#length-2",collision:"none"}}),$("#high-tol").dialog({autoOpen:!1,position:{my:"left+10 top",at:"right top",of:"#id-tol-2",collision:"none"}}),$("#ref-dialog").dialog({autoOpen:!1,modal:!0,dialogClass:"no-close",position:{my:"left+10 top",at:"right top",of:"#id-3",collision:"none"},buttons:{"Continue Anyway":function(){$("#custom-quote").prop("checked",!0),$("#custom-quote").trigger("change"),$(this).dialog("close"),calculate(!0)},"Go Back":function(){["Pebax 45D","Pebax 55D","Pebax 63D","Pebax 70D","Pebax 72D","Pebax 74D","Vestamid ML21"].includes($("#material-2").val())?($("#od-4").prop("checked",!0),$("#od-4").trigger("change")):($("#id-3").prop("checked",!0),$("#id-3").trigger("change")),$(this).dialog("close"),calculate(!1)}}})});function checkLenTol(e){"min"===e?$("#length-tol-2").removeClass("error"):$("#length-tol-2").addClass("error")}function checkRefTol(e,l,a){a?+e>+l?$("#od-tol-2").addClass("error"):$("#od-tol-2").removeClass("error"):+e>+l?$("#id-tol-2").addClass("error"):$("#id-tol-2").removeClass("error")}function checkWallTol(e,l){+e>+l?$("#wall-tol").addClass("error"):$("#wall-tol").removeClass("error")}function calculate(e){var l=+$("#id-2").val(),a=+$("#od-3").val(),o=$("#greenlight"),t=+$("#wall").val(),i=+$("#length-2").val(),d=$("#length-2").hasClass("error"),n=$("#id-tol-2").val(),r=$("#wall-tol").val(),s=$("#material-2").val(),c=+$("#quantity-2").val(),p=$("#unit").val();if("in"==p){function a(e,a,i,d,n){var r=$("#length-tol-2").val().toLowerCase();if(n)var p=$("#id-3").is(":checked"),g=$("#od-tol-2").val();else var p=$("#od-4").is(":checked"),g=$("#id-tol-2").val();console.log(p);var u=$("#wall-tol").val(),v=+$("#length-2").val();t>=e&&t<=a&&60>=v&&12<=v&&!0==p&&300>=c&&.3>=l&&.014<=l&&"min"==r&&""!==s&&+g>=+i&&+u>=+d?($("#custom-quote").prop("checked",!1),console.log("not-greenlight"),$("#custom-quote").trigger("change"),o.prop("checked",!0),o.trigger("change"),$("#wall,#length-2,#length-tol-2,#id-tol-2,#wall-tol,#id-2,#quantity-2").removeClass("error"),$("#wall-dialog").dialog("close"),$("#length-dialog").dialog("close"),$("qty-dialog").dialog("close")):($("#custom-quote").prop("checked",!0),$("#custom-quote").trigger("change"),o.prop("checked",!1),o.trigger("change"),t<e?!$("#wall").hasClass("error")&&($("#wall-dialog").dialog("option","title","Wall Thickness Too Low").dialog("open"),$("#wall").addClass("error")):t>a?!$("#wall").hasClass("error")&&($("#wall-dialog").dialog("option","title","Wall Thickness Too High").dialog("open"),$("#wall").addClass("error")):($("#wall").removeClass("error"),$("#wall-dialog").dialog("close")),.3<l?$("#id-2").addClass("error"):.014>l?$("#id-2").addClass("error"):$("#id-2").removeClass("error"),60<v?(console.log(v+100),!$("#length-2").hasClass("error")&&($("#length-dialog").dialog("option","title","Length Is Too High").dialog("open"),$("#length-2").addClass("error"))):12>v?(console.log(v+100),!$("#length-2").hasClass("error")&&($("#length-dialog").dialog("option","title","Length Is Too Low").dialog("open"),$("#length-2").addClass("error"))):($("#length-2").removeClass("error"),$("#length-dialog").dialog("close")),300<c?!$("#quantity-2").hasClass("error")&&($("#qty-dialog").dialog("open"),$("#quantity-2").addClass("error")):($("#quantity-2").removeClass("error"),$("qty-dialog").dialog("close")),checkLenTol(r),checkRefTol(i,g,n),checkWallTol(d,u))}if(["Pebax 45D","Pebax 55D","Pebax 63D","Pebax 70D","Pebax 72D","Pebax 74D","Vestamid ML21","PET","Delrin"].includes($("#material-2").val())){if($("#4-week-price").val(900),.014>l){!1==e&&($("#id-tol-2").val(.001),$("#wall-tol").val(5e-4));var g=.002,u=.01,v=.001,h=5e-4;a(g,u,v,h,!1)}if(.014<=l&&.05>=l){!1==e&&($("#id-tol-2").val(.001),$("#wall-tol").val(5e-4));var g=.002,u=.01,v=.001,h=5e-4;a(g,u,v,h,!1)}if(.051<=l&&.1>=l){!1==e&&($("#id-tol-2").val(.001),$("#wall-tol").val(.001));var g=.003,u=.015,v=.001,h=.001;a(g,u,v,h,!1)}if(.101<=l&&.15>=l){!1==e&&($("#id-tol-2").val(.0015),$("#wall-tol").val(.001));var g=.003,u=.02,v=.0015,h=.001;a(g,u,v,h,!1)}if(.151<=l&&.2>=l){!1==e&&($("#id-tol-2").val(.002),$("#wall-tol").val(.0015));var g=.004,u=.025,v=.002,h=.0015;a(g,u,v,h,!1)}if(.201<=l&&.25>=l){!1==e&&($("#id-tol-2").val(.0025),$("#wall-tol").val(.0015));var g=.005,u=.025,v=.0025,h=.0015;a(g,u,v,h,!1)}if(.251<=l&&.3>=l){!1==e&&($("#id-tol-2").val(.003),$("#wall-tol").val(.002));var g=.006,u=.025,v=.003,h=.002;a(g,u,v,h,!1)}if(.3<l){!1==e&&($("#id-tol-2").val(.003),$("#wall-tol").val(.002));var g=.006,u=.025,v=.003,h=.002;a(g,u,v,h,!1)}$("#4-week-price").trigger("change")}else{if(.014>l){!1==e&&($("#od-tol-2").val(.001),$("#wall-tol").val(5e-4));var g=.002,u=.01,v=.001,h=5e-4;a(g,u,v,h,!0)}if(.014<=l&&.05>=l){!1==e&&($("#od-tol-2").val(.001),$("#wall-tol").val(5e-4));var g=.002,u=.01,v=.001,h=5e-4;a(g,u,v,h,!0),$("#4-week-price").val(1200)}if(.051<=l&&.1>=l){!1==e&&($("#od-tol-2").val(.001),$("#wall-tol").val(.001));var g=.003,u=.015,v=.001,h=.001;a(g,u,v,h,!0),$("#4-week-price").val(1200)}if(.101<=l&&.15>=l){!1==e&&($("#od-tol-2").val(.0015),$("#wall-tol").val(.001));var g=.003,u=.02,v=.0015,h=.001;a(g,u,v,h,!0),$("#4-week-price").val(1200)}if(.151<=l&&.2>=l){!1==e&&($("#od-tol-2").val(.002),$("#wall-tol").val(.0015));var g=.004,u=.025,v=.002,h=.0015;a(g,u,v,h,!0),$("#4-week-price").val(1200)}if(.201<=l&&.25>=l){!1==e&&($("#od-tol-2").val(.0025),$("#wall-tol").val(.0015));var g=.005,u=.025,v=.0025,h=.0015;a(g,u,v,h,!0),$("#4-week-price").val(1350)}if(.251<=l&&.3>=l){!1==e&&($("#od-tol-2").val(.003),$("#wall-tol").val(.002));var g=.006,u=.025,v=.003,h=.002;a(g,u,v,h,!0),$("#4-week-price").val(1350)}if(.3<l){!1==e&&($("#od-tol-2").val(.003),$("#wall-tol").val(.002));var g=.006,u=.025,v=.003,h=.002;a(g,u,v,h,!0)}$("#4-week-price").trigger("change")}}else{function a(e,a,i,d,n){var r=$("#length-tol-2").val().toLowerCase();if(n)var p=$("#id-3").is(":checked"),g=$("#od-tol-2").val();else var p=$("#od-4").is(":checked"),g=$("#id-tol-2").val();var u=$("#wall-tol").val(),v=+$("#length-2").val();t>=e&&t<=a&&1524>=v&&304<=v&&!0==p&&300>=c&&7.62>=l&&.355<=l&&"min"==r&&""!==s&&+g>=+i&&+u>=+d?($("#custom-quote").prop("checked",!1),$("#custom-quote").trigger("change"),o.prop("checked",!0),o.trigger("change"),$("#wall,#length-2,#length-tol-2,#id-tol-2,#od-tol-2,#wall-tol,#id-2,#quantity-2").removeClass("error"),$("#wall-dialog").dialog("close"),$("#length-dialog").dialog("close"),$("qty-dialog").dialog("close")):($("#custom-quote").prop("checked",!0),$("#custom-quote").trigger("change"),o.prop("checked",!1),o.trigger("change"),t<e?$("#wall").hasClass("error")?console.log("already has error"):($("#wall-dialog").dialog("option","title","Wall Thickness Too Low").dialog("open"),$("#wall").addClass("error")):t>a?$("#wall").hasClass("error")?console.log("already has error"):($("#wall-dialog").dialog("option","title","Wall Thickness Too High").dialog("open"),$("#wall").addClass("error")):($("#wall").removeClass("error"),$("#wall-dialog").dialog("close")),7.62<l?$("#id-2").addClass("error"):.355>l?$("#id-2").addClass("error"):$("#id-2").removeClass("error"),1524<v?$("#length-2").hasClass("error")?console.log("already has error"):($("#length-dialog").dialog("option","title","Length Is Too High").dialog("open"),$("#length-2").addClass("error")):304>v?$("#length-2").hasClass("error")?console.log("already has error"):($("#length-dialog").dialog("option","title","Length Is Too Low").dialog("open"),$("#length-2").addClass("error")):(console.log("length reset"),$("#length-2").removeClass("error"),$("#length-dialog").dialog("close")),300<c?$("#quantity-2").hasClass("error")?console.log("already has error"):($("#qty-dialog").dialog("open"),$("#quantity-2").addClass("error")):($("#quantity-2").removeClass("error"),$("qty-dialog").dialog("close")),checkLenTol(r),checkRefTol(i,g),checkWallTol(d,u))}if(["Pebax 45D","Pebax 55D","Pebax 63D","Pebax 70D","Pebax 72D","Pebax 74D","Vestamid ML21","PET","Delrin"].includes($("#material-2").val())){if($("#4-week-price").val(900),.355>l){!1==e&&($("#id-tol-2").val(.03),$("#wall-tol").val(.013));var g=.0508,u=.254,v=.03,h=.013;a(g,u,v,h,!1)}if(.355<=l&&1.27>=l){!1==e&&($("#id-tol-2").val(.03),$("#wall-tol").val(.013));var g=.0508,u=.254,v=.03,h=.013;a(g,u,v,h,!1)}if(1.2954<=l&&2.54>=l){!1==e&&($("#id-tol-2").val(.03),$("#wall-tol").val(.025));var g=.0762,u=.381,v=.03,h=.025;a(g,u,v,h,!1)}if(2.5654<=l&&3.81>=l){!1==e&&($("#id-tol-2").val(.04),$("#wall-tol").val(.025));var g=.0762,u=.508,v=.04,h=.025;a(g,u,v,h,!1)}if(3.8354<=l&&5.08>=l){!1==e&&($("#id-tol-2").val(.05),$("#wall-tol").val(.038));var g=.1016,u=.635,v=.05,h=.038;a(g,u,v,h,!1)}if(5.105<=l&&6.35>=l){!1==e&&($("#id-tol-2").val(.06),$("#wall-tol").val(.038));var g=.127,u=.635,v=.06,h=.038;a(g,u,v,h,!1)}if(6.375<=l&&7.62>=l){!1==e&&($("#id-tol-2").val(.08),$("#wall-tol").val(.051));var g=.1524,u=.635,v=.08,h=.051;a(g,u,v,h,!1)}if(7.62<l){!1==e&&($("#id-tol-2").val(.08),$("#wall-tol").val(.051));var g=.1524,u=.635,v=.08,h=.051;a(g,u,v,h,!1)}$("#4-week-price").trigger("change")}else{if(.355>l){!1==e&&($("#od-tol-2").val(.03),$("#wall-tol").val(.013));var g=.0508,u=.254,v=.03,h=.013;a(g,u,v,h,!0)}if(.355<=l&&1.27>=l){!1==e&&($("#od-tol-2").val(.03),$("#wall-tol").val(.013));var g=.0508,u=.254,v=.03,h=.013;a(g,u,v,h,!0),$("#4-week-price").val(1200)}if(1.2954<=l&&2.54>=l){!1==e&&($("#od-tol-2").val(.03),$("#wall-tol").val(.025));var g=.0762,u=.381,v=.03,h=.025;a(g,u,v,h,!0),$("#4-week-price").val(1200)}if(2.5654<=l&&3.81>=l){!1==e&&($("#od-tol-2").val(.04),$("#wall-tol").val(.025));var g=.0762,u=.508,v=.04,h=.025;a(g,u,v,h,!0),$("#4-week-price").val(1200)}if(3.8354<=l&&5.08>=l){!1==e&&($("#od-tol-2").val(.05),$("#wall-tol").val(.038));var g=.1016,u=.635,v=.05,h=.038;a(g,u,v,h,!0),$("#4-week-price").val(1200)}if(5.105<=l&&6.35>=l){!1==e&&($("#od-tol-2").val(.06),$("#wall-tol").val(.038));var g=.127,u=.635,v=.06,h=.038;a(g,u,v,h,!0),$("#4-week-price").val(1350)}if(6.375<=l&&7.62>=l){!1==e&&($("#od-tol-2").val(.08),$("#wall-tol").val(.051));var g=.1524,u=.635,v=.08,h=.051;a(g,u,v,h,!0),$("#4-week-price").val(1350)}if(7.62<l){!1==e&&($("#od-tol-2").val(.08),$("#wall-tol").val(.051));var g=.1524,u=.635,v=.08,h=.051;a(g,u,v,h,!0)}$("#4-week-price").trigger("change")}}}$("#greenlight").on("change",function(){this.checked?($("#price-block").css("display","flex"),$("#custom-dialogue").css("display","none")):$("#price-block").css("display","none")}),$("input[data-name=REF]").on("click",function(){["Pebax 45D","Pebax 55D","Pebax 63D","Pebax 70D","Pebax 72D","Pebax 74D","Vestamid ML21"].includes($("#material-2").val())?("id"==$(this).val()||"wall"==$(this).val())&&$("#ref-dialog").dialog("open"):("od"==$(this).val()||"wall"==$(this).val())&&$("#ref-dialog").dialog("open")}),$("#mode").on("change",function(){$(this).is(":checked")?($(".white-text,.radio-button-label-3,.cert-title,.radio-button-label-2,.sales-rep,.text-block-38,.price-title,.cost,.text-block-37,.text-block-64,.text-block-65,.slider,.text-field-3.tol").addClass("light-text"),$(".image-171,.image-167").addClass("reverse"),$(".column-7").addClass("white-background"),$(".text-field-3.tol,.divider").addClass("gray-background"),$(".slim").addClass("no-border"),$(".range-slider").addClass("light-border"),$("#add-extrusion").addClass("blue-button"),sphereController.setValue("#e0e0e0"),$(".price-line").removeClass("chosen"),$("input[data-name=price]:checked").trigger("change")):($(".white-text,.radio-button-label-3,.cert-title,.radio-button-label-2,.sales-rep,.text-block-38,.price-title,.cost,.text-block-37,.text-block-64,.text-block-65,.slider,.text-field-3.tol").removeClass("light-text"),$(".image-171,.image-167").removeClass("reverse"),$(".column-7").removeClass("white-background"),$(".text-field-3.tol,.divider").removeClass("gray-background"),$(".slim").removeClass("no-border"),$(".range-slider").removeClass("light-border"),$("#add-extrusion").removeClass("blue-button"),sphereController.setValue("#333"),$(".price-line").removeClass("chosen-light"),$("input[data-name=price]:checked").trigger("change"))}),$("input[data-name=price]").on("change",function(){$("#mode").is(":checked")?($(".price-line").removeClass("chosen-light"),$(this).closest("div").addClass("chosen-light")):($(".price-line").removeClass("chosen"),$(this).closest("div").addClass("chosen"))}),$("input[data-name=REF]").on("change",function(){$("span.blue").removeClass("hide-price"),$("#title-"+$(this).val()).addClass("hide-price"),$(".div-block-264").css("opacity",1),$(this).closest("div.div-block-264").css("opacity",.1);"id"==$(this).val()&&$(this).is(":checked")&&($("#id-tol-2").val("REF"),$("#id-2, #id-range, #id-tol-2").prop("disabled",!0),$("#od-3, #od-range, #wall, #wall-range, #od-tol-2, #wall-tol").prop("disabled",!1),"REF"==$("#wall-tol").val()&&$("#wall-tol").val(.001),"REF"==$("#od-tol-2").val()&&$("#od-tol-2").val(.001),calculate(!1));"od"==$(this).val()&&$(this).is(":checked")&&($("#od-tol-2").val("REF"),$("#od-3, #od-range, #od-tol-2").prop("disabled",!0),$("#id-2, #id-range, #wall, #wall-range, #wall-tol, #id-tol-2").prop("disabled",!1),"REF"==$("#wall-tol").val()&&$("#wall-tol").val(.001),"REF"==$("#id-tol-2").val()&&$("#id-tol-2").val(.001),calculate(!1));"wall"==$(this).val()&&$(this).is(":checked")&&($("#wall-tol").val("REF"),$("#wall, #wall-range, #wall-tol").prop("disabled",!0),$("#id-2, #id-range, #od-3, #od-range, #od-tol-2, #id-tol-2").prop("disabled",!1),"REF"==$("#id-tol-2").val()&&$("#id-tol-2").val(.001),"REF"==$("#od-tol-2").val()&&$("#od-tol-2").val(.001));calculate(!0)}),$("#cert-0-dialog").click(function(){$("#cert-0").dialog("open")}),$("#cert-1-dialog").click(function(){$("#cert-1").dialog("open")}),$("#cert-2-dialog").click(function(){$("#cert-2").dialog("open")}),$("#cert-3-dialog").click(function(){$("#cert-3").dialog("open")}),$("#qty-popup").click(function(){$("#qty-dialog").dialog("open")}),$("#id-range").on("input",function(){if("in"==$("#unit").val())var e=.002,l=3,a=4;else var e=.05,l=2,a=3;$("#id-2").val((+this.value).toFixed(l));var o=+$("#od-range").val(),t=+$("#wall-range").val();if(+this.value>=o-e){var i=+this.value+e;odController.setValue(i),$("#od-range").val(i.toFixed(l)),$("#od-3").val(i.toFixed(l))}$(":radio[value=wall]").is(":checked")&&$("#wall, #wall-range").val(((o-+this.value)/2).toFixed(a));$(":radio[value=od]").is(":checked")&&($("#od-3, #od-range").val((+this.value+2*t).toFixed(l)),odController.setValue((+this.value+2*t).toFixed(l)));idController.setValue((+this.value).toFixed(l)),calculate(!1)}),$("#id-2").on("change",function(){var e=+$("#od-range").val();if("in"==$("#unit").val())var l=.002,a=3,o=4,t=.014,i=.3;else var l=.05,a=2,o=3,t=.355,i=7.62;this.value>i?this.value=i:this.value<t&&(this.value=t);var d=$(this).val();$("#id-range").val((+d).toFixed(a));var n=+$("#wall-range").val();if(+d>=e-l){var r=+d+ +l;odController.setValue(r),$("#od-range").val(r.toFixed(a)),$("#od-3").val(r.toFixed(a)).trigger("change")}$(":radio[value=wall]").is(":checked")&&$("#wall, #wall-range").val(((e-+d)/2).toFixed(o)).trigger("change");idController.setValue((+d).toFixed(a)),$(":radio[value=od]").is(":checked")&&($("#od-3, #od-range").val((+d+2*n).toFixed(a)),odController.setValue((+d+2*n).toFixed(a)));calculate(!1)}),$("#od-range").on("input",function(l){if("in"==$("#unit").val())var e=.014,a=.002,o=3,t=4;else var e=.355,a=.05,o=2,t=3;$("#od-3").val((+this.value).toFixed(o));var i=+$("#id-range").val(),d=+$("#wall-range").val();if(+this.value-2*d<e)return $("#od-range,#od-3").val(2*d+i),l.preventDefault(),!1;if(+this.value<i+a){var n=+this.value-a;idController.setValue(n),$("#id-range").val(n.toFixed(o)),$("#id-2").val(n.toFixed(o))}$(":radio[value=id]").is(":checked")&&($("#id-2, #id-range").val((+this.value-2*d).toFixed(o)),idController.setValue((+this.value-2*d).toFixed(o)));$(":radio[value=wall]").is(":checked")&&$("#wall, #wall-range").val(((+this.value-i)/2).toFixed(t));odController.setValue((+this.value).toFixed(o)),calculate(!1)}),$("#od-3").on("change",function(){if("in"==$("#unit").val())var e=.002,l=3,a=4,o=.018,t=.35;else var e=.05,l=2,a=3,o=.457,t=8.89;var i=(+$("#id-range").val()).toFixed(l),d=this.value;this.value>t?this.value=t:this.value<o&&(this.value=o);var n=$(this).val();$("#od-range").val((+n).toFixed(l));var r=+$("#wall-range").val();if(+n<=i+e){var s=+n-e;idController.setValue(s),$("#id-range").val(s.toFixed(l)),$("#id-2").val(s.toFixed(l))}d>t&&odController.setValue((+n).toFixed(l));$(":radio[value=id]").is(":checked")&&($("#id-2, #id-range").val((+n-2*r).toFixed(l)).trigger("change"),$("#wall, #wall-range").val(((+n-+$("#id-2").val())/2).toFixed(a)));$(":radio[value=wall]").is(":checked")&&$("#wall, #wall-range").val(((+n-i)/2).toFixed(a)).trigger("change");d<o&&odController.setValue((+n).toFixed(l));calculate(!1)}),$("#wall-range").on("input",function(){if("in"==$("#unit").val())var e=.002,l=3,a=4;else var e=.05,l=2,a=3;$("#wall").val((+this.value).toFixed(a));var o=+$("#id-range").val(),t=+$("#od-range").val();if($(":radio[value=id]").is(":checked")){if("in"==$("#unit").val())var i=.014;else var i=.0355;$("wall, #wall-range").attr("max",(+$("#od-3").val()-i)/2),$("#id-2, #id-range").val((t-2*+this.value).toFixed(l)),idController.setValue((t-2*+this.value).toFixed(l))}$(":radio[value=od]").is(":checked")&&($("#od-3, #od-range").val((o+2*+this.value).toFixed(l)),odController.setValue((o+2*+this.value).toFixed(l)));calculate(!1)}),$("#wall").on("change",function(){if("in"==$("#unit").val())var e=.002,l=3,a=4,o=.05,t=5e-4;else var e=.05,l=2,a=3,o=1.27,t=.0127;this.value>o?this.value=o:this.value<t&&(this.value=t);var i=$(this).val();$("#wall-range").val((+i).toFixed(a)).trigger("change");var d=+$("#id-range").val(),n=+$("#od-range").val();if($(":radio[value=id]").is(":checked")){if("in"==$("#unit").val())var r=.02;else var r=.508;$("wall, #wall-range").attr("max",(+$("#od-3").val()-r)/2),$("#id-2, #id-range").val((n-2*+i).toFixed(l)).trigger("change"),idController.setValue((n-2*+i).toFixed(l))}$(":radio[value=od]").is(":checked")&&($("#od-3, #od-range").val((d+2*+i).toFixed(l)).trigger("change"),odController.setValue((d+2*+i).toFixed(l)));calculate(!1)}),$("#id-tol-2,#od-tol-2,#wall-tol").on("input",function(){this.value>.2*+$("#id-2").val()&&$("#high-tol").dialog("open")}),$("#len-range").on("input",function(){$("#length-2").val(this.value),calculate(!0)}),$("#length-2").on("change",function(){$("#len-range").val(this.value),calculate(!0)}),$("#quantity-2").on("change",function(){calculate(!0)});function changeRef(e){["Pebax 45D","Pebax 55D","Pebax 63D","Pebax 72D","Vestamid ML21","PET","Delrin"].includes(e)?$("input[id=od-4]").prop("checked",!0).trigger("change"):$("input[id=id-3]").prop("checked",!0).trigger("change")}$("#material-2").on("change",function(){return $(this).css("border","0px"),changeRef(this.value),calculate(!1),["Pebax 25D","Pebax 35D","Pebax 45D","Pebax 55D","Pebax 63D","Pebax 72D","Vestamid ML21"].includes(this.value)&&$("#colorant").empty().append("<option value=\"\">Select a Color...</option><option value=\"White\">White</option><option value=\"Black\">Black</option><option value=\"Cool Grey (7C)\">Cool Grey (7C)</option><option value=\"Green (3248C)\">Green (3248C)</option><option value=\"Green (3268C)\">Green (3268C)</option><option value=\"Green (3298C)\">Green (3298C)</option><option value=\"Blue (290C)\">Blue (290C)</option><option value=\"Blue (295C)\">Blue (295C)</option><option value=\"Blue (2925C)\">Blue (2925C)</option><option value=\"Blue (301C)\">Blue (301C)</option><option value=\"Purple (2655C)\">Purple (2655C)</option>"),["LDPE"].includes(this.value)&&($("#color-2").empty().append("<option value=\"20% BaSO4\">20% BaSO4</option>"),$("#colorant").empty().append("<option value=\"None\">None</option><option value=\"Cool Grey (4C)\">Cool Grey (4C)</option>")),["HDPE"].includes(this.value)&&($("#color-2").empty().append("<option value=\"None\">None</option>"),$("#colorant").empty().append("<option value=\"None\">None</option><option value=\"Cool Grey (4C)\">Cool Grey (4C)</option>")),["Delrin","PET","Tecoflex 80A","Pellethane 80AE","Pellethane 90AE","Pellethane 55D","Pellethane 65D","NeuSoft UR862A","NeuSoft UR842A","NeuSoft UR852A","NeuSoft UR873A"].includes(this.value)?($("#colorant option:first-child").prop("selectedIndex",0),$("input[id=color]").prop("checked",!1).trigger("change").prop("disabled",!0),$("#colorant").css("display","none")):$("input[id=color]").prop("disabled",!1),["Pebax 25D","Pebax 35D","Pebax 55D","Pebax 63D","Pebax 72D","Pebax 45D"].includes(this.value)?void $("#color-2").empty().append("<option value=\"None\">None</option><option value=\"20% BaSO4\">20% BaSO4</option><option value=\"Lubricious Additive\">Lubricious Additive</option><option value=\"20% BaSO4 & Lubricious Additive\">20% BaSO4 & Lubricious Additive</option>"):["Pebax 40D","Pebax 70D"].includes(this.value)?void $("#color-2").empty().append("<option value=\"None\">None</option><option value=\"20% BaSO4\">20% BaSO4</option>"):["Vestamid ML21"].includes(this.value)?void $("#color-2").empty().append("<option value=\"None\">None</option><option value=\"Lubricious Additive\">Lubricious Additive</option>"):void $("#color-2").empty().append("<option value=\"None\">None</option>")}),$("#color").on("change",function(){if($(this).is(":checked")){if(opacityController.setValue(1),$("#colorant").val())var e=$("#colorant").val();else var e="#ffffff";materialController.setValue(e)}else opacityController.setValue(.85),materialController.setValue("#ffffff")}),$("#colorant").on("change",function(){materialController.setValue(this.value)}),$("#length-tol-2").on("change",function(){calculate(!0)}),$("#id-tol-2").on("change",function(){calculate(!0)}),$("#wall-tol").on("change",function(){calculate(!0)}),renderer.setAnimationLoop(()=>{clock.getElapsedTime();scene.getObjectByName("obj");scene.rotation.y+=rotate,controls.update(),renderer.render(scene,camera)});function takeScreenshot(){var e=scene.getObjectByName("bg");e.visible=!1,scene.rotation.y=35,renderer.render(scene,camera),renderer.domElement.toBlob(function(e){var l=document.createElement("a"),a=URL.createObjectURL(e),o=new FileReader;o.readAsDataURL(e),o.onloadend=function(){o.result},l.href=a,l.download="Extrusion.png",l.click()},"image/png",1),e.visible=!0}function sendScreenshot(){var e=scene.getObjectByName("bg");e.visible=!1,scene.rotation.y=35,renderer.render(scene,camera),renderer.domElement.toBlob(function(e){var l=document.createElement("a"),a=URL.createObjectURL(e),o=new FileReader;o.readAsDataURL(e),o.onloadend=function(){var e=o.result;$("#screenshot").val(e)}},"image/png",1),e.visible=!0}$(window).keydown(function(e){if(13==e.keyCode)return e.preventDefault(),!1});function exportBinary(){var e=scene.getObjectByName("bg");e.visible=!1;var l=$("#length-2").val();lengthController.setValue(l);var a=scene.getObjectByName("obj");const o=exporter.parse(a,{binary:!0});saveArrayBuffer(o,"extrusion.stl"),lengthController.setValue(.2),e.visible=!0}function save(e,l){const a=document.createElement("a");a.href=URL.createObjectURL(e),a.download=l,a.click()}function saveArrayBuffer(e,l){save(new Blob([e],{type:"application/octet-stream"}),l)}$("#unit").on("change",function(){if("in"==this.value){var e=+$("#id-range").val(),l=+$("#od-range").val(),a=+$("#len-range").val(),o=+$("#wall-range").val();$("#id-range").attr({min:.014,max:.3,step:.001}),$("#od-range").attr({min:.018,max:.35,step:.001}),$("#len-range").attr({max:100,step:1}),$("#wall-range").attr({min:5e-4,max:.1,step:5e-4}),camera.position.set(-3,5,20).setLength(.75),controls.maxDistance=4,$("#id-range,#id-2").val((e/25.4).toFixed(3)),$("#len-range,#length-2").val((a/25.4).toFixed(0)),$("#od-range,#od-3").val((l/25.4).toFixed(3)),$("#wall, #wall-range").val((o/25.4).toFixed(4)),idController.setValue(e/25.4),odController.setValue(l/25.4),lengthController.setValue(.2)}else{var e=+$("#id-range").val(),l=+$("#od-range").val(),a=+$("#len-range").val(),o=+$("#wall-range").val();$("#id-range").attr({min:.51,max:7.62,step:.025}),$("#od-range").attr({min:.02,max:8.85,step:.025}),$("#len-range").attr({max:2540,step:25}),$("#wall-range").attr({min:.013,max:2.54,step:.013}),camera.position.set(-3,5,20).setLength(19),controls.maxDistance=50,$("#id-range,#id-2").val((25.4*e).toFixed(2)),$("#len-range,#length-2").val((25.4*a).toFixed(0)),$("#wall, #wall-range").val((25.4*o).toFixed(3)),odController.setValue(25.4*l),idController.setValue(25.4*e),$("#od-range,#od-3").val((25.4*l).toFixed(2)),lengthController.setValue(5)}calculate(!1)});function storeHistory(){null!==sessionStorage.getItem("history")&&sessionStorage.removeItem("history");var e=$("#quote").html();sessionStorage.setItem("history",e)}function getHistory(){var e=sessionStorage.getItem("history");null!==e&&(!0==confirm("Looks like you were already working on a quote, would you like to pick up where you left off?")?($("#quote").empty().append(e),$("#quote-panel").css("display","flex"),$(".lil-gui").addClass("hide-price")):sessionStorage.removeItem("history"))}getHistory();function createLine(){var e=$(".line"),l=e.length+1,a=$("#id-2").val(),o=$("#od-3").val(),t=$("#wall").val(),i=$("#length-2").val(),d=$("#id-tol-2").val(),n=$("#od-tol-2").val(),r=$("#wall-tol").val(),s=$("#length-tol-2").val(),c=$("#material-2").val(),p=$("#color-2").val(),g=$("#colorant").val(),u=$("#quantity-2").val(),v=$("input[data-name=cert]:checked").val(),h=$("#unit").val(),m=$("#"+$("input[data-name=price]:checked").val()).val(),f=$("input[data-name=price]:checked").val();if(!$("#custom-quote").is(":checked"))var w=`<div class="line" id="line`+l+`">
<div class="title-block"><p class="delete">x</p><p class="line-title">Line `+l+` (`+h+`)</p><p class="edit" id="`+l+`">Edit</p></div>
<div class="row">
	<div class="col">
		<div class="item"><p class="label">ID</p><input class="quote-input" id="l`+l+`-id" value="`+a+`" readonly></input></div>
  	<div class="item"><p class="label">OD</p><input class="quote-input" id="l`+l+`-od" value="`+o+`" readonly></input></div>
    <div class="item"><p class="label">Wall</p><input class="quote-input" id="l`+l+`-wall" value="`+t+`" readonly></input></div>
  	<div class="item"><p class="label">Length</p><input class="quote-input" id="l`+l+`-length" value="`+i+`" readonly></input></div>
    <div class="item"><p class="label">Material</p><input class="quote-input" id="l`+l+`-material" value="`+c+`" readonly></input></div>
    <div class="item"><p class="label">Color</p><input class="quote-input" id="l`+l+`-color" value="`+g+`" readonly></input></div>
    <div class="item input-remove"><p class="label">Price($)</p><input class="quote-input price-item" id="l`+l+`-price" value="`+m+`" readonly></input></div>
    <div class="item"><p class="label">Cert Level</p><input class="quote-input" id="l`+l+`-cert" value="`+v+`" readonly></input></div>
    <input class="linenumber" id="l`+l+`-line" value="`+l+`" readonly style="display:none;"></input>
    <input class="quote-input unit" id="l`+l+`-unit" value="`+h+`" readonly style="display:none;"></input>
    <input type="checkbox" class="line-greenlight" id="l`+l+`-greenlight" value="`+greenlight+`" readonly style="display:none;"></input>
	</div>
	<div class="col">
  	<div class="item"><p class="label">ID Tol</p><input class="quote-input" id="l`+l+`-id-tol" value="`+d+`" readonly></input></div>
    <div class="item"><p class="label">OD Tol</p><input class="quote-input" id="l`+l+`-od-tol" value="`+n+`" readonly></input></div>
    <div class="item"><p class="label">Wall Tol</p><input class="quote-input" id="l`+l+`-wall-tol" value="`+r+`" readonly></input></div>
    <div class="item"><p class="label">Length Tol</p><input class="quote-input" id="l`+l+`-length-tol" value="`+s+`" readonly></input></div>
    <div class="item"><p class="label">Additive</p><input class="quote-input" id="l`+l+`-additive" value="`+p+`" readonly></input></div>
    <div class="item"><p class="label">Quantity (Feet)</p><input class="quote-input" id="l`+l+`-quantity" value="`+u+`" readonly></input></div>
    <div class="item input-remove"><p class="label">Lead Time</p><input class="quote-input line-leadtime" id="l`+l+`-leadtime" value="`+f.replace("-price","")+`" readonly></input>
  </div>
  </div>
</div>`;else var w=`<div class="line" id="line`+l+`">
<div class="title-block"><p class="delete">x</p><p class="line-title">Line `+l+` (`+h+`)</p><p class="edit" id="`+l+`">Edit</p></div>
<div class="row">
	<div class="col">
		<div class="item"><p class="label">ID</p><input class="quote-input" id="l`+l+`-id" value="`+a+`" readonly></input></div>
  	<div class="item"><p class="label">OD</p><input class="quote-input" id="l`+l+`-od" value="`+o+`" readonly></input></div>
    <div class="item"><p class="label">Wall</p><input class="quote-input" id="l`+l+`-wall" value="`+t+`" readonly></input></div>
  	<div class="item"><p class="label">Length</p><input class="quote-input" id="l`+l+`-length" value="`+i+`" readonly></input></div>
    <div class="item"><p class="label">Material</p><input class="quote-input" id="l`+l+`-material" value="`+c+`" readonly></input></div>
    <div class="item"><p class="label">Color</p><input class="quote-input" id="l`+l+`-color" value="`+g+`" readonly></input></div>
    <div class="item input-remove"><p class="label">Price($)</p><input class="quote-input price-item" id="l`+l+`-price" value="`+m+`" readonly></input></div>
    <div class="item"><p class="label">Cert Level</p><input class="quote-input" id="l`+l+`-cert" value="`+v+`" readonly></input></div>
    <input class="linenumber" id="l`+l+`-line" value="`+l+`" readonly style="display:none;"></input>
    <input class="quote-input unit" id="l`+l+`-unit" value="`+h+`" readonly style="display:none;"></input>
    <input type="checkbox" class="line-greenlight" id="l`+l+`-greenlight" value="`+greenlight+`" readonly style="display:none;" checked></input>
	</div>
	<div class="col">
  	<div class="item"><p class="label">ID Tol</p><input class="quote-input" id="l`+l+`-id-tol" value="`+d+`" readonly></input></div>
    <div class="item"><p class="label">OD Tol</p><input class="quote-input" id="l`+l+`-od-tol" value="`+n+`" readonly></input></div>
    <div class="item"><p class="label">Wall Tol</p><input class="quote-input" id="l`+l+`-wall-tol" value="`+r+`" readonly></input></div>
    <div class="item"><p class="label">Length Tol</p><input class="quote-input" id="l`+l+`-length-tol" value="`+s+`" readonly></input></div>
    <div class="item"><p class="label">Additive</p><input class="quote-input" id="l`+l+`-additive" value="`+p+`" readonly></input></div>
    <div class="item"><p class="label">Quantity (Feet)</p><input class="quote-input" id="l`+l+`-quantity" value="`+u+`" readonly></input></div>
    <div class="item input-remove"><p class="label">Lead Time</p><input class="quote-input line-leadtime" id="l`+l+`-leadtime" value="`+f.replace("-price","")+`" readonly></input>
  </div>
  </div>
</div>`;$("#quote").append(w),storeHistory()}function styles(){for(var e=$(".line-greenlight"),l=0;l<e.length;l++)if($(e[l]).is(":checked")){var a=$(e[l]).closest(".line");a.find(".quote-input").addClass("red-input"),a.addClass("red-line"),a.find(".input-remove").addClass("hide-price")}else{var a=$(e[l]).closest(".line");a.find(".quote-input").removeClass("red-input"),a.removeClass("red-line"),a.find(".input-remove").removeClass("hide-price")}0<$(".line-greenlight:checkbox:checked").length?($("#view-quote").text("View Custom Quote"),$("#view-quote").closest("div").css("background-color","#f06f59"),$("input[id=\"final-check\"]").prop("checked",!1),$("#final-check-text").val(!1)):($("#view-quote").text("View Instant Quote"),$("#view-quote").closest("div").css("background-color","#91c765"),$("input[id=\"final-check\"]").prop("checked",!0),$("#final-check-text").val(!0));for(var o=$(".line-leadtime"),l=0;l<o.length;l++){if("2-day"==$(o[l]).val())return void(!1==user.model.credit_terms?$("#view-po").addClass("hide-price"):$("#view-po").removeClass("hide-price"));$("#view-po").removeClass("hide-price")}}$("#add-extrusion").click(function(){return""==$("#material-2").val()?($("#material-2").css("border","3px solid #ff6f6f"),$("#material-2").get(0).scrollIntoView(),$("#greenlight").prop("checked",!1),void $("greenlight").trigger("change")):void($("#greenlight").is(":checked")?(createLine(),styles(),resetInputs(),$("#quote-panel").css("display","flex"),$(".lil-gui").addClass("hide-price"),$("#price-block").css("display","none"),$("#level-0").prop("checked",!0),$("#next-step").removeClass("hide-price")):$("#custom-quote").is(":checked")&&$("#custom-dialogue").css("display","flex"))});function resetInputs(){$("#unit").val("in").trigger("change"),setTimeout(function(){$("#od-3,#od-range").val(.12).trigger("change"),$("#id-2,#id-range").val(.1).trigger("change"),$("#id-tol-2,#wall-tol").val(.001).trigger("change"),$("#wall, #wall-range").val(.01).trigger("change")},500),$("#length-2,#len-range").val(12),$("#length-tol-2").val("MIN"),$("#od-tol-2").val("REF"),$("#quantity-2").val(300),$("input[id=\"od-4\"]").prop("checked",!0),$("input[id=\"od-4\"]").trigger("change"),$("#material-2").val($("#material-2 option:first").val()),$("#color-2").val($("#color-2 option:first").val()),$("#colorant").val($("#colorant option:first").val()),$("#color").trigger("change"),$("#price-block").css("display","none")}$("input[id=2-day]").click(function(){!1==user.model.credit_terms&&$("#2day-dialog").dialog("open")}),$("#custom-change").click(function(){$("#wall, #id-2, #od-3, #length-2").css("border","none"),$("#id-tol-2, #od-tol-2, #length-tol-2, #wall-tol").css("border","1px solid white"),$("#custom-quote").prop("checked",!0),$("#custom-quote").trigger("change"),"none"==$("#editing").css("display")?(createLine(),styles(),$("#next-step").removeClass("hide-price")):(update(),styles()),$("#quote-panel").css("display","flex"),$(".lil-gui").addClass("hide-price"),$("#custom-dialogue").css("display","none"),$(".ui-dialog-content").dialog("close"),resetInputs();window.parent.postMessage({custom_line_added:!0},"https://orders.midwestint.com/instant-quote/designer.html")}),$("#custom-quote").on("change",function(){$(this).is(":checked")&&$("#price-block").css("display","none")}),$("#continue").click(function(){$("input[id=\"final-check\"]").is(":checked")?($("#final-details").css("display","block"),$("html, body").animate({scrollTop:$("#final-details").offset().top},2e3)):($("#custom-menu").removeClass("hide-price"),$("html, body").animate({scrollTop:$("#custom-menu").offset().top},2e3)),$("#next-step").addClass("hide-price")}),$("#close-quote").click(function(){$(".lil-gui").removeClass("hide-price")}),$("#open-quote").click(function(){$(".lil-gui").addClass("hide-price")}),$("#add-another").click(function(){$("#next-step").addClass("hide-price"),$("#quote-panel").css("display","none"),$(".lil-gui").removeClass("hide-price")}),$("#view-carrier").click(function(){$("#carrier-details").hasClass("hide-price")?($("#carrier-details").removeClass("hide-price"),$(this).text("I don't want to use my shipping account")):($("#carrier-details").addClass("hide-price"),$(this).text("Charge to your shipping account"),$("#shipping-account").val(""))}),$("#view-po").click(function(){$("#po-details").css("display","flex")}),$("#shipping-carrier").on("change",function(){"UPS"==this.value?$("#custom-method").empty().append("<option value=\"UPS Ground\">UPS Ground</option><option value=\"UPS 2nd Day Air\">UPS 2nd Day Air</option><option value=\"UPS 3rd Day Select\">UPS 3rd Day Select</option><option value=\"UPS Next Day Air\">UPS Next Day Air</option><option value=\"UPS Worldwide Expedited\">UPS Worldwide Expedited</option><option value=\"UPS Worldwide Saver\">UPS Worldwide Saver</option>"):$("#custom-method").empty().append("<option value=\"FedEx Ground\">FedEx Ground</option><option value=\"FedEx Priority Overnight\">FedEx Priority Overnight</option><option value=\"FedEx Standard Overnight\">FedEx Standard Overnight</option><option value=\"FedEx 2 Day\">FedEx 2 Day</option><option value=\"FedEx Express Saver\">FedEx Express Saver</option><option value=\"FedEx International First\">FedEx International First</option><option value=\"FedEx International Priority\">FedEx International Priority</option><option value=\"FedEx International Priority Express\">FedEx International Priority Express</option><option value=\"FedEx International Economy\">FedEx International Economy</option>")}),$(document).on("click",".edit",function(){$("#next-step").addClass("hide-price"),$("#final-details").css("display","none"),$("#custom-menu").addClass("hide-price");var e=this.id;if($(".line").not("#line"+e).addClass("opacity"),$("#custom-quote").prop("checked",$("#l"+e+"-greenlight").is(":checked")),$("#unit").val($("#l"+e+"-unit").val()),$("#unit").trigger("change"),$("#id-2, #id-range").val($("#l"+e+"-id").val()),$("#od-3, #od-range").val($("#l"+e+"-od").val()),$("#length-2, #len-range").val($("#l"+e+"-length").val()),$("#id-tol-2").val($("#l"+e+"-id-tol").val()),$("#wall").val($("#l"+e+"-wall").val()),$("#od-tol-2").val($("#l"+e+"-od-tol").val()),$("#wall-tol").val($("#l"+e+"-wall-tol").val()),$("#length-tol-2").val($("#l"+e+"-length-tol").val()),$("#material-2").val($("#l"+e+"-material").val()),$("#color-2").val($("#l"+e+"-additive").val()),$("#colorant").val($("#l"+e+"-color").val()),$("#quantity-2").val($("#l"+e+"-quantity").val()),$("#editing").css("display","flex"),$("#now-editing").val(e),$(".update, .update-button").css("display","flex"),!$("#l"+e+"-greenlight").is(":checked")){var l=$("#l"+e+"-leadtime").val().replace("-price",""),a=$("#l"+e+"-cert").val();$("#"+l).prop("checked",!0).trigger("change"),$("#level-"+a).prop("checked",!0)}$("#id-2, #od-3, #wall, #material-2").trigger("change"),$("#submit-container").css("display","none"),$("#l"+e+"-greenlight").is(":checked")||$("#price-block").css("display","flex"),"REF"==$("#l"+e+"-id-tol").val()&&($("#id-3").prop("checked",!0),$("#id-3").trigger("change")),"REF"==$("#l"+e+"-od-tol").val()&&($("#od-4").prop("checked",!0),$("#od-4").trigger("change")),"REF"==$("#l"+e+"-wall-tol").val()&&($("#wall-2").prop("checked",!0),$("#wall-2").trigger("change")),calculate(!1)});function update(){var e=$("#now-editing").val();$("#l"+e+"-unit").val($("#unit").val()),$("#l"+e+"-id").val($("#id-2").val()),$("#l"+e+"-od").val($("#od-3").val()),$("#l"+e+"-wall").val($("#wall").val()),$("#l"+e+"-length").val($("#length-2").val()),$("#l"+e+"-id-tol").val($("#id-tol-2").val()),$("#l"+e+"-od-tol").val($("#od-tol-2").val()),$("#l"+e+"-wall-tol").val($("#wall-tol").val()),$("#l"+e+"-length-tol").val($("#length-tol-2").val()),$("#l"+e+"-material").val($("#material-2").val()),$("#l"+e+"-additive").val($("#color-2").val()),$("#l"+e+"-color").val($("#colorant").val()),$("#l"+e+"-quantity").val($("#quantity-2").val()),$("#custom-quote").is(":checked")||($("#l"+e+"-cert").val($("input[data-name=cert]:checked").val()),$("#l"+e+"-price").val($("#"+$("input[data-name=price]:checked").val()).val()),$("#l"+e+"-leadtime").val($("input[data-name=price]:checked").val().replace("-price",""))),$("#editing").css("display","none"),$(".update, .update-button").css("display","none"),$("#submit-container").css("display","flex"),$("#price-block").css("display","none"),$("#l"+e+"-greenlight").prop("checked",$("#custom-quote").is(":checked")),storeHistory()}$("#update").click(function(){update(),styles(),$(".line").removeClass("opacity"),$("#next-step").removeClass("hide-price")}),$(document).on("click",".delete",function(){$(this).closest(".line").remove();var e=1;$(".line").map(function(){var l=$(this).find(".unit").val();$(this).find(".line-title").first().text("Line "+e+" ("+l+")"),$(this).find(".linenumber").val(e),$(this).find(".edit").first().attr("id",e),$(this).find("input").map(function(){this.id=this.id.replace(/[0-9]/g,e)}),++e}),storeHistory()});function createArray(){for(var e=$(".price-item"),l=0,a=0;a<e.length;a++)l+=+$(e[a]).val();$("#total-price").val(l);let o=[];var t=$(".line");for(let e,l=0;l<t.length;++l){e={};var d=$("#"+t[l].id).find("input");for(let l=0;l<d.length;++l){var n=d[l].id;if(d[l].id.includes("greenlight"))var r=$(d[l]).is(":checked");else var r=d[l].value;e[n]=r}o=o.concat(e)}var s=JSON.stringify(o);$("#order").val(s),$("#shipping").val($("#shipping-method").val()),$("#custom-carrier").val($("#shipping-carrier").val()),$("#account-number").val($("#shipping-account").val()),$("#user-details").val(JSON.stringify(JSON.parse(localStorage.getItem("pocketbase_auth")))),$("#po-number-submit").val($("#purchase-order-file").val()),$("#preferred-method").val($("#custom-method").val()),sessionStorage.removeItem("history"),$("#quote").submit()}$("#checkout").click(function(){for(var e=$(".price-item"),l=0,a=0;a<e.length;a++)l+=+$(e[a]).val();var o=.03*l,t=$(".line"),d={number_of_lines:t.length,submitted:!0,checkout_method:"CC"};window.parent.postMessage(d,"https://orders.midwestint.com/instant-quote/designer.html");var n=t.length+1;return $("#quote").append(`<div class="line" id="line`+n+`" style="display:none;">
		<input class="quote-input" id="l`+n+`-id" value="CC Processing Fee" readonly></input>
  	<input class="quote-input price-item" id="l`+n+`-price" value="`+o+`" readonly></input>
    <input class="linenumber" id="l`+n+`-line" value="`+n+`" readonly style="display:none;"></input>
</div>`),$("#shipping-carrier").val()||$("#shipping-method").val()?$("#shipping-carrier").val()&&!$("#shipping-account").val()?($("#account-dialog").dialog("open"),!1):void(!$("#po-number").val()&&$("#terms").removeClass("hide-price"),0<$("#po-number").val().length&&($("input[id=\"po-verification\"]").is(":checked")?$("#terms").removeClass("hide-price"):$("#verification").dialog("open"))):($("#shipping-dialog").dialog("open"),!1)}),$("#upload-po").click(function(){return $("#shipping-carrier").val()||$("#shipping-method").val()?$("#shipping-carrier").val()&&!$("#shipping-account").val()?($("#account-dialog").dialog("open"),!1):void $("#upload-container").removeClass("hide-price"):($("#shipping-dialog").dialog("open"),!1)}),$("#po-buy").click(function(){return $("#shipping-carrier").val()||$("#shipping-method").val()?$("#shipping-carrier").val()&&!$("#shipping-account").val()?($("#account-dialog").dialog("open"),!1):void $("#po-accept").removeClass("hide-price"):($("#shipping-dialog").dialog("open"),!1)}),$("#po-verification").click(function(){$(this).is(":checked")?$("#no-po-checkout").removeClass("hide-price"):$("#no-po-checkout").addClass("hide-price")}),$("#no-po-checkout").click(function(){if($("input[id=\"po-verification\"]").is(":checked")){$("#purchase-order-no-upload").val("no-upload"),$("#terms").removeClass("hide-price");var e=$(".line"),l={number_of_lines:e.length,submitted:!0,checkout_method:"PO"};window.parent.postMessage(l,"https://orders.midwestint.com/instant-quote/designer.html")}else $("#verification").dialog("open")}),$("#send").click(function(){var e={order_placed:!0,ended:new Date};window.parent.postMessage(e,"https://orders.midwestint.com/instant-quote/designer.html"),createArray(),$("#loading").css("display","flex")}),$("#po-checkout").click(function(){$("#terms").removeClass("hide-price");var e=$(".line"),l={number_of_lines:e.length,submitted:!0,checkout_method:"PO"};window.parent.postMessage(l,"https://orders.midwestint.com/instant-quote/designer.html")}),$("#purchase-order-file").on("change",function(){$("#upload-container").addClass("hide-price"),$("#po-checkout").removeClass("hide-price"),setTimeout(function(){$("#upload-po").text($(".text-block-57.w-file-upload-file-name").text())},100),$("#upload-po").css("background-color","#91c765")}),$(".close-upload").click(function(){$("#upload-container").addClass("hide-price")}),$("#po-checkout").click(function(){$("#terms").removeClass("hide-price")}),$("#continue-with-custom").click(function(){createArray(),$("#loading").css("display","flex");var e=$(".line"),l={number_of_lines:e.length,submitted:!0};window.parent.postMessage(l,"https://orders.midwestint.com/instant-quote/designer.html")});
